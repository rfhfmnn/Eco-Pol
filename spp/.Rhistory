setwd("C:/Users/rafah/Documents/Eco-Pol/xlsx")
df<-read.xlsx('preferencias_g.xlsx')
library(openxlsx)
library(dplyr)
df<-read.xlsx('preferencias_g.xlsx')
View(df)
df_red[,7,11]
df_red<-df_red[,7,11]
df_red<-df[,7,11]
df<-read.xlsx('preferencias_g.xlsx')
df_red<-df[,c(7,11)]
View(df_red)
library(highcharter)
install.packages('highcharter')
install.packages('htmlwidgets')
library(highcharter)
library(htmlwidgets)
hchart(data_to_sankey(df_red), "sankey", name = "Transferencia de votos")
hchart(data_to_sankey(df_red), "sankey", name = "Transferencia de votos")
df<-read.xlsx('preferencias_g.xlsx')
df_red<-df[,c(7,11)]
hchart(data_to_sankey(df_red), "sankey", name = "Transferencia de Votos")
hchart(data_to_sankey(df_red), "sankey", name = "Transferencia de Votos")
df<-read.xlsx('preferencias_g.xlsx')
df_red<-df[,c(7,11)]
View(df_red)
View(df_red)
dataForSankey <- df_red%>%dplyr::select(¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?, ¿A.quién.votaste.en.las.PASO?)
dataForSankey <- df_red%>%dplyr::select("¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?", "¿A.quién.votaste.en.las.PASO?")
hchart(data_to_sankey(dataForSankey), "sankey", name = "Gender based Outcomes")
##SANKEY PLOT
install.packages('D3Network')
##SANKEY PLOT
install.packages('d3Network')
help(d3Network)
d3Sankey(Links=df_red, Source="source", Target="target", Value = "value",height = 600,
width = 900, fontsize = 7)
df_red(Links=df_red, Source="source", Target="target", Value = "value",height = 600,
width = 900, fontsize = 7)
sankeynetwork(Links=df_red, Source="source", Target="target", Value = "value",height = 600,
width = 900, fontsize = 7)
sankeyNetwork(Links=df_red, Source="source", Target="target", Value = "value",height = 600,
width = 900, fontsize = 7)
##SANKEY PLOT
install.packages('networkD3')
library(d3Network)
sankeyNetwork(Links=df_red, Source="source", Target="target", Value = "value",height = 600,
width = 900, fontsize = 7)
d3Network(Links=df_red, Source="source", Target="target", Value = "value",height = 600,
width = 900, fontsize = 7)
d3Network(Links=df_red, Source="source", Target="target", Value = "value",height = 600,
width = 900, fontsize = 7)
library(networkD3)
library(htmlwidgets)
View(dataForSankey)
View(df_red)
View(df_red)
df_red<-df %>% rename("¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?"=generales)
df_red<-df %>% rename("¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?"="generales")
df_red<-df %>% rename("generales"="¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?")
View(df_red)
df<-df %>% rename("generales"="¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?")
View(df_red)
df<-df %>% rename("generales"="¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
"paso"="¿A.quién.votaste.en.las.PASO?")
df<-read.xlsx('preferencias_g.xlsx')
df<-df %>% rename("generales"="¿Cuál.sería.su.intención.de.voto.en.las.elecciones.generales?",
"paso"="¿A.quién.votaste.en.las.PASO?")
df_red<-df[,c(7,11)]
View(df_red)
sankey_plot <- sankeyNetwork(
Links = df_red,
Source = "generales",
Target = "paso"
)
sankey_plot <- sankeyNetwork(
Links = df_red,
Source = "generales",
Target = "paso",
Nodes=NULL
)
library(ggalluvial)
install.packages("ggalluvial")
library(ggalluvial)
ggplot(data = df_red,
aes(axis1 = generales, axis2 = paso)) +
geom_alluvium(aes(fill = paso)) +
geom_stratum() +
geom_text(stat = "stratum",
aes(label = after_stat(stratum))) +
scale_x_discrete(limits = c("Encuesta", "Respuesta"),
expand = c(0.15, 0.05)) +
theme_void()
ggplot(data = df_red,
aes(axis1 = paso, axis2 = generales)) +
geom_alluvium(aes(fill = paso)) +
geom_stratum() +
geom_text(stat = "stratum",
aes(label = after_stat(stratum))) +
scale_x_discrete(limits = c("Encuesta", "Respuesta"),
expand = c(0.15, 0.05)) +
theme_void()
ggplot(data = df_red,
aes(axis1 = paso, axis2 = generales)) +
geom_alluvium(aes(fill = paso),
curve_type = "sine") +
geom_stratum() +
geom_text(stat = "stratum",
aes(label = after_stat(stratum))) +
scale_x_discrete(limits = c("Encuesta", "Respuesta"),
expand = c(0.15, 0.05)) +
scale_fill_viridis_d() +
theme_void() +
theme(legend.position = "none")
ggplot(data = df_red,
aes(axis1 = paso, axis2 = generales)) +
geom_alluvium(aes(fill = paso),
curve_type = "arctangent") +
geom_stratum() +
geom_text(stat = "stratum",
aes(label = after_stat(stratum))) +
scale_x_discrete(limits = c("Encuesta", "Respuesta"),
expand = c(0.15, 0.05)) +
scale_fill_viridis_d() +
theme_void() +
theme(legend.position = "none")
ggplot(data = df_red,
aes(axis1 = paso, axis2 = generales)) +
geom_alluvium(aes(fill = paso),
curve_type = "sigmoid") +
geom_stratum() +
geom_text(stat = "stratum",
aes(label = after_stat(stratum))) +
scale_x_discrete(limits = c("Encuesta", "Respuesta"),
expand = c(0.15, 0.05)) +
scale_fill_viridis_d() +
theme_void() +
theme(legend.position = "none")
ggplot(data = df_red,
aes(axis1 = paso, axis2 = generales)) +
geom_alluvium(aes(fill = paso),
curve_type = "sine") +
geom_stratum() +
geom_text(stat = "stratum",
aes(label = after_stat(stratum))) +
scale_x_discrete(limits = c("Encuesta", "Respuesta"),
expand = c(0.15, 0.05)) +
scale_fill_viridis_d() +
theme_void() +
theme(legend.position = "none")
ggplot(data = df_red,
aes(axis1 = paso, axis2 = generales)) +
geom_alluvium(aes(fill = paso),
curve_type = "arctangent") +
geom_stratum() +
geom_text(stat = "stratum",
aes(label = after_stat(stratum))) +
scale_x_discrete(limits = c("Encuesta", "Respuesta"),
expand = c(0.15, 0.05)) +
scale_fill_viridis_d() +
theme_void() +
theme(legend.position = "none")
